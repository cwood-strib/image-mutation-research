<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/styles.css" />
  <title>Document</title>
</head>
<body>
  <style>
    img {
      max-width: 100%;
    }
  </style>

  <img 
    data-src="/images/ak_mountains.jpg?src"
    data-srcset="/images/ak_mountains.jpg?srcset 600w, 
    /images/glacier_path.jpg?srcset 900w"
    sizes="(min-width: 768px) 600w, 900w"
  />

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      let image = document.querySelector("img");
      let srcSet = image.getAttribute("data-srcset");
      image.setAttribute('srcset', srcSet)
      
      // In local testing, setting the delay to greater than or equal to 6 millseconds causes a re-download
      const delay = 6;
      // Push to next tick
      setTimeout(() => {
        let src = image.getAttribute("data-src");
        image.setAttribute('src', src)
      }, delay)
    })
  </script>
  
</body>
</html>
